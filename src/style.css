:root {
  /* 颜色变量 */
  --color-primary: #4f46e5;
  --color-primary-dark: #4338ca;
  --color-primary-light: #818cf8;
  
  --color-secondary: #10b981;
  --color-secondary-dark: #059669;
  --color-secondary-light: #34d399;
  
  --color-accent: #f59e0b;
  --color-accent-dark: #d97706;
  --color-accent-light: #fbbf24;
  
  --color-background: #ffffff;
  --color-background-soft: #f9fafb;
  --color-background-mute: #f3f4f6;
  
  --color-border: #e5e7eb;
  --color-border-hover: #d1d5db;
  
  --color-text: #111827;
  --color-text-light: #6b7280;
  --color-text-muted: #9ca3af;
  
  --color-danger: #ef4444;
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-info: #3b82f6;
  
  /* 游戏化颜色 */
  --color-gaming-gold: #ffd700;
  --color-gaming-silver: #c0c0c0;
  --color-gaming-bronze: #cd7f32;
  --color-gaming-neon: #00ff41;
  --color-gaming-purple: #8b5cf6;
  
  /* 国际化相关变量 */
  --color-primary-rgb: 79, 70, 229;
  
  /* 尺寸变量 */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  
  /* 字体变量 */
  --font-family-base: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;
  --font-family-heading: var(--font-family-base);
  --font-family-gaming: 'Courier New', 'Monaco', 'Menlo', monospace;
  
  /* 圆角变量 */
  --border-radius-sm: 0.25rem;
  --border-radius-md: 0.5rem;
  --border-radius-lg: 0.75rem;
  --border-radius-xl: 1rem;
  --border-radius-full: 9999px;
  
  /* 阴影变量 */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  --shadow-gaming: 0 0 20px rgba(255, 215, 0, 0.3);
  --shadow-neon: 0 0 10px var(--color-gaming-neon);
  
  /* 过渡变量 */
  --transition-fast: 150ms;
  --transition-normal: 300ms;
  --transition-slow: 500ms;
  
  /* 游戏化动画时长 */
  --animation-bounce: 0.6s;
  --animation-pulse: 2s;
  --animation-float: 3s;
}

/* 深色主题变量 */
[data-theme="dark"] {
  /* 深色主题颜色变量 */
  --color-primary: #6366f1;
  --color-primary-dark: #4f46e5;
  --color-primary-light: #8b5cf6;
  
  --color-secondary: #14b8a6;
  --color-secondary-dark: #0d9488;
  --color-secondary-light: #2dd4bf;
  
  --color-accent: #f59e0b;
  --color-accent-dark: #d97706;
  --color-accent-light: #fbbf24;
  
  --color-background: #0f172a;
  --color-background-soft: #1e293b;
  --color-background-mute: #334155;
  
  --color-border: #475569;
  --color-border-hover: #64748b;
  
  --color-text: #f1f5f9;
  --color-text-light: #cbd5e1;
  --color-text-muted: #94a3b8;
  
  --color-danger: #f87171;
  --color-success: #4ade80;
  --color-warning: #fbbf24;
  --color-info: #60a5fa;
  
  /* 深色主题游戏化颜色 */
  --color-gaming-gold: #ffd700;
  --color-gaming-silver: #e2e8f0;
  --color-gaming-bronze: #f97316;
  --color-gaming-neon: #00ff41;
  --color-gaming-purple: #a855f7;
  
  /* 深色主题阴影 */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
  --shadow-gaming: 0 0 20px rgba(255, 215, 0, 0.5);
  --shadow-neon: 0 0 15px var(--color-gaming-neon);
}

/* 基础样式 */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  font-weight: normal;
}

body {
  min-height: 100vh;
  color: var(--color-text);
  background: var(--color-background);
  transition: color 0.5s, background-color 0.5s;
  line-height: 1.6;
  font-family: var(--font-family-base);
  font-size: 16px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-y: auto;
  overflow-x: hidden; /* 防止水平滚动 */
}

/* 滚动条美化 */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-background-mute);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
  border-radius: var(--border-radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(45deg, var(--color-primary-dark), var(--color-secondary-dark));
}

/* 链接样式 */
a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--transition-fast);
}

a:hover {
  color: var(--color-primary-dark);
}

/* 按钮样式 */
button, .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
  color: white;
  border: none;
  border-radius: var(--border-radius-lg);
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-normal);
  box-shadow: var(--shadow-md);
  position: relative;
  overflow: hidden;
}

button::before, .btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

button:hover::before, .btn:hover::before {
  left: 100%;
}

button:hover, .btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

button:active, .btn:active {
  transform: translateY(0);
}

/* 游戏化按钮变体 */
.btn-gaming {
  background: linear-gradient(45deg, var(--color-gaming-purple), var(--color-gaming-neon));
  box-shadow: var(--shadow-neon);
  font-family: var(--font-family-gaming);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-gaming:hover {
  box-shadow: 0 0 25px var(--color-gaming-neon);
  transform: translateY(-3px) scale(1.05);
}

.btn-primary {
  background: linear-gradient(45deg, var(--color-primary), var(--color-primary-light));
}

.btn-secondary {
  background: linear-gradient(45deg, var(--color-secondary), var(--color-secondary-light));
}

.btn-accent {
  background: linear-gradient(45deg, var(--color-accent), var(--color-accent-light));
}

/* 输入框样式 */
input, textarea {
  padding: 0.75rem 1rem;
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius-lg);
  font-size: 1rem;
  transition: all var(--transition-normal);
  background: var(--color-background);
}

input:focus, textarea:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);
  transform: translateY(-1px);
}

/* 卡片样式 */
.card {
  background: var(--color-background);
  border-radius: var(--border-radius-xl);
  padding: 1.5rem;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-normal);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.6s;
}

.card:hover::before {
  left: 100%;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-xl);
}

/* 游戏化卡片 */
.card-gaming {
  border: 2px solid transparent;
  background: linear-gradient(white, white) padding-box,
              linear-gradient(45deg, var(--color-gaming-gold), var(--color-gaming-purple)) border-box;
}

.card-gaming:hover {
  box-shadow: var(--shadow-gaming);
  transform: translateY(-8px) scale(1.02);
}

/* 动画类 */
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 5px var(--color-primary);
  }
  50% {
    box-shadow: 0 0 20px var(--color-primary), 0 0 30px var(--color-primary);
  }
}

@keyframes rainbow {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes zoomIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* 动画工具类 */
.animate-bounce {
  animation: bounce var(--animation-bounce) infinite;
}

.animate-pulse {
  animation: pulse var(--animation-pulse) infinite;
}

.animate-float {
  animation: float var(--animation-float) ease-in-out infinite;
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

.animate-rainbow {
  animation: rainbow 3s linear infinite;
}

.animate-slide-up {
  animation: slideInUp 0.6s ease-out;
}

.animate-slide-left {
  animation: slideInLeft 0.6s ease-out;
}

.animate-slide-right {
  animation: slideInRight 0.6s ease-out;
}

.animate-fade-in {
  animation: fadeIn 0.8s ease-out;
}

.animate-zoom-in {
  animation: zoomIn 0.5s ease-out;
}

/* 延迟动画类 */
.animate-delay-100 { animation-delay: 0.1s; }
.animate-delay-200 { animation-delay: 0.2s; }
.animate-delay-300 { animation-delay: 0.3s; }
.animate-delay-500 { animation-delay: 0.5s; }

/* 游戏化元素 */
.gaming-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.75rem;
  background: linear-gradient(45deg, var(--color-gaming-gold), var(--color-gaming-bronze));
  color: white;
  border-radius: var(--border-radius-full);
  font-size: 0.875rem;
  font-weight: 600;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  box-shadow: var(--shadow-gaming);
}

.gaming-score {
  font-family: var(--font-family-gaming);
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--color-gaming-neon);
  text-shadow: 0 0 10px var(--color-gaming-neon);
}

.gaming-level {
  background: linear-gradient(45deg, var(--color-gaming-purple), var(--color-primary));
  color: white;
  padding: 0.5rem 1rem;
  border-radius: var(--border-radius-lg);
  font-weight: 600;
  box-shadow: var(--shadow-md);
}

/* 进度条 */
.progress-bar {
  width: 100%;
  height: 8px;
  background: var(--color-background-mute);
  border-radius: var(--border-radius-full);
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
  border-radius: var(--border-radius-full);
  transition: width var(--transition-slow);
  position: relative;
}

.progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: progress-shine 2s infinite;
}

@keyframes progress-shine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* 工具提示 */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip::before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 0.5rem 0.75rem;
  border-radius: var(--border-radius-md);
  font-size: 0.875rem;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-normal);
  z-index: 1000;
}

.tooltip::after {
  content: '';
  position: absolute;
  bottom: 115%;
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: rgba(0, 0, 0, 0.9);
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-normal);
}

.tooltip:hover::before,
.tooltip:hover::after {
  opacity: 1;
  visibility: visible;
}

/* 响应式工具类 */
.hidden-mobile {
  display: block;
}

.hidden-desktop {
  display: none;
}

@media (max-width: 768px) {
  .hidden-mobile {
    display: none;
  }
  
  .hidden-desktop {
    display: block;
  }
}

/* 游戏化背景效果 */
.gaming-bg {
  position: relative;
  overflow: hidden;
}

.gaming-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 20%, rgba(79, 70, 229, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 60%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
  animation: gaming-bg-float 10s ease-in-out infinite;
  z-index: -1;
}

@keyframes gaming-bg-float {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(10px, -10px) rotate(1deg); }
  66% { transform: translate(-5px, 5px) rotate(-1deg); }
}

/* 辅助类 */
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

.text-center {
  text-align: center;
}

.mt-1 { margin-top: var(--space-xs); }
.mt-2 { margin-top: var(--space-sm); }
.mt-3 { margin-top: var(--space-md); }
.mt-4 { margin-top: var(--space-lg); }
.mt-5 { margin-top: var(--space-xl); }

.mb-1 { margin-bottom: var(--space-xs); }
.mb-2 { margin-bottom: var(--space-sm); }
.mb-3 { margin-bottom: var(--space-md); }
.mb-4 { margin-bottom: var(--space-lg); }
.mb-5 { margin-bottom: var(--space-xl); }

/* 响应式辅助类 */
@media (max-width: 768px) {
  .hide-mobile {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .hide-desktop {
    display: none !important;
  }
}

/* RTL布局支持 */
html.rtl {
  direction: rtl;
}

html.rtl body {
  text-align: right;
}

/* RTL下的通用样式调整 */
html.rtl .flex-row {
  flex-direction: row-reverse;
}

html.rtl .text-left {
  text-align: right;
}

html.rtl .text-right {
  text-align: left;
}

html.rtl .margin-left {
  margin-left: 0;
  margin-right: auto;
}

html.rtl .margin-right {
  margin-right: 0;
  margin-left: auto;
}

html.rtl .padding-left {
  padding-left: 0;
  padding-right: var(--spacing, 1rem);
}

html.rtl .padding-right {
  padding-right: 0;
  padding-left: var(--spacing, 1rem);
}

/* RTL下的导航和布局 */
html.rtl .main-nav ul {
  justify-content: flex-end;
}

html.rtl .search-box {
  flex-direction: row-reverse;
}

html.rtl .search-box input {
  border-radius: 0 4px 4px 0;
}

html.rtl .search-box button {
  border-radius: 4px 0 0 4px;
}

html.rtl .footer-content {
  text-align: right;
}

html.rtl .game-meta {
  flex-direction: row-reverse;
}

html.rtl .game-card {
  text-align: right;
}

/* RTL下的控制组件 */
html.rtl .emulator-controls .controls-group {
  flex-direction: row-reverse;
}

html.rtl .emulator-controls .control-btn {
  flex-direction: row-reverse;
}

html.rtl .volume-control {
  flex-direction: row-reverse;
}

html.rtl .save-controls {
  flex-direction: row-reverse;
}

/* RTL下的按键帮助 */
html.rtl .key-help-modal {
  text-align: right;
}

html.rtl .key-item {
  flex-direction: row-reverse;
}

/* RTL下的语言切换器 */
html.rtl .language-switcher {
  direction: rtl;
}

html.rtl .current-language {
  flex-direction: row-reverse;
}

html.rtl .language-dropdown {
  left: auto;
  right: 0;
}

html.rtl .language-option {
  flex-direction: row-reverse;
}

/* 阿拉伯文字体优化 */
html[lang^="ar"] {
  font-family: 'Segoe UI', Tahoma, Arial, Helvetica, sans-serif;
}

html[lang^="ar"] .language-switcher,
html[lang^="ar"] .current-language,
html[lang^="ar"] .language-dropdown {
  font-family: 'Segoe UI', Tahoma, Arial, Helvetica, sans-serif;
}

/* 日文字体优化 */
html[lang^="ja"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
}

/* 中文字体优化 */
html[lang^="zh"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
}

/* 响应式RTL调整 */
@media (max-width: 768px) {
  html.rtl .container {
    padding: 0 15px;
  }
  
  html.rtl .language-switcher-container {
    left: 15px;
    right: auto;
  }
}

/* EmulatorJS 虚拟按钮自定义样式 */
/* SELECT、START 和 COIN 按钮设置为圆角长方形 */
.ejs_virtualGamepad_button.b_select,
.ejs_virtualGamepad_button.b_start,
.ejs_virtualGamepad_button.b_coin {
  border-radius: 8px !important; /* 圆角长方形 */
  width: 50px !important; /* 稍微减小宽度 */
  height: 25px !important;
  line-height: 25px !important;
  font-size: 11px !important;
  font-weight: 600 !important;
  background-color: rgba(255, 255, 255, 0.2) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  transform: translateX(-50%) !important; /* 以自身中心为基准定位 */
}

/* 按下状态 */
.ejs_virtualGamepad_button.b_select.ejs_virtualGamepad_button_down,
.ejs_virtualGamepad_button.b_start.ejs_virtualGamepad_button_down,
.ejs_virtualGamepad_button.b_coin.ejs_virtualGamepad_button_down {
  background-color: rgba(0, 0, 0, 0.6) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
}

/* 移动端竖屏时的尺寸调整 */
@media (orientation: portrait) and (max-width: 768px) {
  .ejs_virtualGamepad_button.b_select,
  .ejs_virtualGamepad_button.b_start,
  .ejs_virtualGamepad_button.b_coin {
    width: 55px !important; /* 竖屏时稍大一些 */
    height: 28px !important;
    line-height: 28px !important;
    font-size: 10px !important;
  }
}

/* 小屏幕设备额外调整 */
@media (max-width: 480px) {
  .ejs_virtualGamepad_button.b_select,
  .ejs_virtualGamepad_button.b_start,
  .ejs_virtualGamepad_button.b_coin {
    width: 45px !important; /* 更小屏幕时进一步减小 */
    height: 24px !important;
    line-height: 24px !important;
    font-size: 9px !important;
  }
}
