<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€å°åŒ– EmulatorJS æµ‹è¯•</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: Arial, sans-serif; }
        #emulator { width: 100vw; height: 100vh; background: #111; }
        .info { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 10px; border-radius: 5px; z-index: 1000; }
        .error { color: #ff4444; }
        .success { color: #44ff44; }
    </style>
</head>
<body>
    <div class="info">
        <div id="status">åˆå§‹åŒ–ä¸­...</div>
        <div id="config" style="font-size: 12px; margin-top: 10px;"></div>
    </div>
    <div id="emulator"></div>

    <script>
        // è®¾ç½®EmulatorJSé…ç½®
        window.EJS_player = '#emulator';
        window.EJS_gameUrl = '/roms/Contra1(U)30.nes';
        window.EJS_system = 'nes';
        window.EJS_pathtodata = 'https://cdn.emulatorjs.org/4.2.3/data/';
        window.EJS_gameName = 'é­‚æ–—ï¿?;
        
        // æ˜¾ç¤ºé…ç½®
        document.getElementById('config').innerHTML = `
            <strong>é…ç½®:</strong><br>
            System: ${window.EJS_system}<br>
            Game: ${window.EJS_gameUrl}<br>
            Path: ${window.EJS_pathtodata}
        `;
        
        // çŠ¶æ€æ›´æ–°å‡½ï¿?
        function updateStatus(message, isError = false) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = isError ? 'error' : 'success';
            console.log(message);
        }
        
        // ç›‘å¬é”™è¯¯
        window.addEventListener('error', (e) => {
            updateStatus('é”™è¯¯: ' + (e.error?.message || e.message), true);
        });
        
        // ç›‘å¬æœªå¤„ç†çš„Promiseé”™è¯¯
        window.addEventListener('unhandledrejection', (e) => {
            updateStatus('Promiseé”™è¯¯: ' + e.reason, true);
        });
        
        // åŠ è½½EmulatorJS
        updateStatus('åŠ è½½EmulatorJS...');
        
        const script = document.createElement('script');
        script.src = 'https://cdn.emulatorjs.org/4.2.3/data/loader.js';
        script.onload = () => {
            updateStatus('EmulatorJSå·²åŠ è½½ï¼Œç­‰å¾…åˆå§‹ï¿?..');
        };
        script.onerror = () => {
            updateStatus('EmulatorJSåŠ è½½å¤±è´¥ï¿?, true);
        };
        
        document.head.appendChild(script);
        
        // æ£€æŸ¥EmulatorJSåˆå§‹ï¿?
        let checkCount = 0;
        const checkInit = setInterval(() => {
            checkCount++;
            if (window.EJS_emulator) {
                updateStatus('ï¿?EmulatorJSå·²åˆå§‹åŒ–ï¿?);
                clearInterval(checkInit);
            } else if (checkCount > 100) { // 10ç§’ååœæ­¢æ£€ï¿?
                updateStatus('âš ï¸ EmulatorJSåˆå§‹åŒ–è¶…ï¿?, true);
                clearInterval(checkInit);
            }
        }, 100);
    </script>
</body>
</html> 
